<mat-sidenav-container class="sidenav__wrapper">
  <mat-sidenav
    #sidenav
    mode="side"
    [(opened)]="opened"
    (opened)="events.push('open!')"
    (closed)="events.push('close!')"
  >
    <div class="sidenav__container">
      <h2 class="sidenav__hl">{{ settingsDefaults.panelTitle }}</h2>
      <p>
        <mat-form-field class="example-full-width">
          <mat-label>Override prompt template</mat-label>
          <textarea matInput placeholder="Current prompt template"></textarea>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field class="example-full-width">
          <mat-label>Retrieval Mode</mat-label>
          <input
            type="text"
            placeholder="Select a retrieval mode"
            aria-label="Retrieval Mode"
            matInput
            [formControl]="retrievalModeControl"
            [matAutocomplete]="auto"
          />
          <mat-autocomplete #auto="matAutocomplete">
            @for (mode of selectedModes | async; track mode) {
            <mat-mode [value]="mode">{{ mode }}</mat-mode>
            }
          </mat-autocomplete>
        </mat-form-field>
      </p>
      <!-- <p><mat-checkbox [(ngModel)]="opened">Open</mat-checkbox></p> -->
      <p>
        <mat-checkbox [(ngModel)]="settingsDefaults.semanticRanker">Use semantic ranker for retrieval</mat-checkbox>
      </p>
      <p>
        <mat-checkbox [(ngModel)]="settingsDefaults.semanticCaptions"
          >Use query-contextural summaries instead of whole documents</mat-checkbox
        >
      </p>
      <p><mat-checkbox [(ngModel)]="settingsDefaults.followUpQuestions">Suggest follow-up questions</mat-checkbox></p>
      <p><mat-checkbox [(ngModel)]="settingsDefaults.streaming">Stream chat completion responses</mat-checkbox></p>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="inner-wrapper">
      <button class="button__button settings" title="Application Settings" (click)="sidenav.toggle()">
        <img src="./assets/svg/gear-solid.svg?raw" alt="Settings" class="icon__img" />
        <span>{{ settingsDefaults.panelLabel }}</span>
      </button>
      <!--       <div class="example-events">
        @for (e of events; track e) {
        <div>{{ e }}</div>
        }
      </div> -->
      <chat-component
        title="Ask anything or try an example"
        data-input-position="sticky"
        data-interaction-model="chat"
        data-api-url="{apiBaseUrl}"
        data-use-stream="{useStream}"
        data-approach="rrr"
        data-overrides=""
      ></chat-component>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
